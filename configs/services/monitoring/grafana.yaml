server:
  protocol: https
  root_url: https://grafana.apollo.local
  http_addr: 0.0.0.0
  http_port: 3001
  domain: grafana.apollo.local
  enforce_domain: true
  enable_gzip: true
  cert_file: /etc/grafana/ssl/cert.pem
  cert_key: /etc/grafana/ssl/key.pem

security:
  admin_user: admin
  admin_password: ${GRAFANA_ADMIN_PASSWORD}
  secret_key: ${GRAFANA_SECRET_KEY}
  disable_gravatar: false
  data_source_proxy_whitelist: []
  cookie_secure: true
  cookie_samesite: strict
  allow_embedding: false
  strict_transport_security: true
  x_content_type_options: true
  x_xss_protection: true

database:
  type: postgres
  host: postgres:5432
  name: grafana
  user: grafana
  password: ${GRAFANA_DB_PASSWORD}
  ssl_mode: require
  max_idle_conn: 2
  max_open_conn: 0
  conn_max_lifetime: 14400

session:
  provider: redis
  provider_config: addr=redis:6379,pool_size=100,db=0,password=${REDIS_PASSWORD}
  cookie_name: grafana_session
  cookie_secure: true
  session_life_time: 86400
  gc_interval_time: 86400

dataproxy:
  logging: true
  timeout: 30
  keep_alive_seconds: 30

analytics:
  reporting_enabled: false
  check_for_updates: true

snapshots:
  external_enabled: true
  external_snapshot_url: https://snapshots.apollo.local
  external_snapshot_name: Apollo Snapshots

dashboards:
  versions_to_keep: 20
  min_refresh_interval: 5s
  default_home_dashboard_path: /var/lib/grafana/dashboards/apollo-overview.json

datasources:
  - name: Prometheus
    type: prometheus
    access: proxy
    url: http://prometheus:9090
    is_default: true
    editable: false

  - name: Loki
    type: loki
    access: proxy
    url: http://loki:3100
    editable: false

  - name: PostgreSQL
    type: postgres
    url: postgres:5432
    database: apollo
    user: ${POSTGRES_USER}
    secureJsonData:
      password: ${POSTGRES_PASSWORD}
    jsonData:
      sslmode: require
      maxOpenConns: 0
      maxIdleConns: 2
      connMaxLifetime: 14400

  - name: Elasticsearch
    type: elasticsearch
    url: http://elasticsearch:9200
    database: "[apollo-*]"
    jsonData:
      timeField: "@timestamp"
      esVersion: 8
      logMessageField: message
      logLevelField: level

users:
  allow_sign_up: false
  allow_org_create: false
  auto_assign_org: true
  auto_assign_org_id: 1
  auto_assign_org_role: Viewer
  viewers_can_edit: false
  editors_can_admin: false

auth:
  disable_login_form: false
  disable_signout_menu: false

  oauth_auto_login: false

  anonymous:
    enabled: false
    org_name: Main Org.
    org_role: Viewer

  basic:
    enabled: true

  ldap:
    enabled: false

smtp:
  enabled: true
  host: ${SMTP_HOST}:${SMTP_PORT}
  user: ${SMTP_USER}
  password: ${SMTP_PASSWORD}
  cert_file:
  key_file:
  skip_verify: false
  from_address: grafana@apollo.local
  from_name: Apollo Grafana
  ehlo_identity:

alerting:
  enabled: true
  execute_alerts: true
  error_or_timeout: alerting
  nodata_or_nullvalues: no_data
  concurrent_render_limit: 5
  evaluation_timeout_seconds: 30
  notification_timeout_seconds: 30
  max_attempts: 3

unified_alerting:
  enabled: true
  execute_alerts: true
  evaluation_timeout: 30s
  max_attempts: 3
  min_interval: 10s

log:
  mode: console file
  level: info
  filters:

paths:
  data: /var/lib/grafana
  logs: /var/log/grafana
  plugins: /var/lib/grafana/plugins
  provisioning: /etc/grafana/provisioning

provisioning:
  dashboards:
    - name: 'Apollo Dashboards'
      org_id: 1
      folder: 'Apollo'
      type: file
      options:
        path: /var/lib/grafana/dashboards

panels:
  disable_sanitize_html: false
  enable_alpha: false

plugins:
  enable_alpha: false
  app_tls_skip_verify_insecure: false
  allow_loading_unsigned_plugins: []

feature_toggles:
  enable: []

enterprise:
  license_path: /etc/grafana/license.jwt
